{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shambhavi/Desktop/Amazone-Clone-Updated-codes-main/src/OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport { useDispatch, useSelector } from 'react-redux';\nimport CheckoutProduct from './CheckoutProduct';\nimport { useHistory } from 'react-router';\nimport { getorderListAction_details, payorderAction_details } from './Reducers/actions/orderActions';\nimport './OrderScreen.css';\n\nfunction OrderScreen() {\n  _s();\n\n  const {\n    id\n  } = useParams(); // console.log(\"ORDER Id-\",id);\n\n  const [sdkReady, setSdkReady] = useState(false);\n  let history = useHistory();\n  const dispatch = useDispatch();\n  const getorderList = useSelector(state => state.getorderList);\n  const {\n    getOrderItems,\n    loading,\n    error\n  } = getorderList;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = orderPay; //renaming as one loading already there frm getorderList\n\n  useEffect(() => {\n    console.log(\"O.S\", getOrderItems);\n\n    const paypalScript = async () => {\n      const {\n        data: clientId\n      } = await axios.get('http://localhost:4000/config/paypal');\n      console.log(\"1.CLIENT ID\", clientId);\n      const script = document.createElement(\"script\");\n      script.type = 'text/javascript';\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\n      script.async = true;\n\n      script.onload = () => //it means script has been loaded  \n      {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n      console.log(\"WINDOW PP\", window.paypal);\n    }; //Q.disatch up or down?\n\n\n    paypalScript();\n    dispatch(getorderListAction_details(id)); // if(successPay || Object.keys(getorderList.getOrderItems).length==0)\n    //  dispatch(getorderListAction_details(id))\n    // else if(!getorderList.getOrderItems.isPaid)  \n    //  paypalScript()\n    // dispatch(getorderListAction_details(id))\n  }, [dispatch, id, successPay]);\n\n  const successHandler = paymentResult => {\n    console.log(\"PAYMENT RESULT\", paymentResult);\n    dispatch(payorderAction_details(id, paymentResult));\n  }; // console.log(\"O.S2\",getOrderItems,loading);\n  // const submit_form=()=>\n  // {\n  // const paypalScript2=async()=>\n  // {\n  //   const {data:clientId}= await axios.get('http://localhost:4000/config/paypal')\n  //   // const {data}= await axios.get('http://localhost:4000/config/paypal')\n  //   const script= document.createElement(\"script\")\n  //   script.type='text/javascript'\n  //   script.src=`https://www.paypal.com/sdk/js?client-id=${clientId}`\n  //   script.async=true\n  //   script.onload=()=> //it means script has been loaded  \n  //   {\n  //     setSdkReady(true)\n  //   }\n  //   document.body.appendChild(script)\n  //   console.log(\"CLIENT ID\",clientId);\n  //   // console.log(\"CLIENT DI2\",data);\n  // }\n  // paypalScript2()\n  // }\n  // dispatch(getorderListAction_details(id))\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"logo\",\n        src: \"https://www.logodesign.net/logo/peace-bird-in-water-drop-3572ld.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"registration_detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"heading\",\n        children: \"Order screen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), loading == true && Object.keys(getorderList.getOrderItems).length == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"ORDER NUMBER \", getorderList.getOrderItems._id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), getorderList.getOrderItems.shippingAddress.address, \",\", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), \" \", getorderList.getOrderItems.user.Name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 82\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), ' ', getorderList.getOrderItems.user.email, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 39\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shipping address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 22\n        }, this), getorderList.getOrderItems.shippingAddress.address, \",\", getorderList.getOrderItems.shippingAddress.city, \" \", ' ', \",\", getorderList.getOrderItems.shippingAddress.postalCode, \",\", ' ', getorderList.getOrderItems.shippingAddress.country, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 18\n        }, this), getorderList.getOrderItems.isDelivered ? /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Delivered on \", getorderList.getOrderItems.deliveredAt]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 63\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \" Not Deivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 18\n        }, this), \"Method:-\", getorderList.getOrderItems.paymentMethod, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 18\n        }, this), getorderList.getOrderItems.isPaid ? /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Paid on \", getorderList.getOrderItems.paidAt]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 54\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \" Not paid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 18\n        }, this), getorderList.getOrderItems.orderItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Your order cart is empty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Go back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 20\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: getorderList.getOrderItems.orderItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image,\n              className: \"placeOrder_img_class\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/product/${item.idname}`,\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 27\n            }, this), ' ', item.qty, \" x \", item.price, \" = \\u20B9 \", item.qty * item.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 19\n        }, this), \"Item Cost :- \\u20B9 \", getorderList.getOrderItems.totalPrice - getorderList.getOrderItems.shippingPrice - getorderList.getOrderItems.taxPrice, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 150\n        }, this), \"Shipping :- \\u20B9 \", getorderList.getOrderItems.shippingPrice, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 75\n        }, this), \"Tax :- \\u20B9 \", getorderList.getOrderItems.taxPrice, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 65\n        }, this), \"Total Cost:- \\u20B9 \", getorderList.getOrderItems.totalPrice, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 73\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 78\n        }, this), /*#__PURE__*/_jsxDEV(PayPalButton, {\n          amount: getorderList.getOrderItems.totalPrice,\n          onSuccess: successHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 1\n        }, this), \"Not loading\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderScreen, \"drjCfeKfcsqhXcUOweuyOzIRmYo=\", false, function () {\n  return [useParams, useHistory, useDispatch, useSelector, useSelector];\n});\n\n_c = OrderScreen;\nexport default OrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"sources":["/Users/shambhavi/Desktop/Amazone-Clone-Updated-codes-main/src/OrderScreen.js"],"names":["React","useEffect","useState","Link","axios","useParams","PayPalButton","useDispatch","useSelector","CheckoutProduct","useHistory","getorderListAction_details","payorderAction_details","OrderScreen","id","sdkReady","setSdkReady","history","dispatch","getorderList","state","getOrderItems","loading","error","orderPay","loadingPay","success","successPay","console","log","paypalScript","data","clientId","get","script","document","createElement","type","src","async","onload","body","appendChild","window","paypal","successHandler","paymentResult","Object","keys","length","_id","shippingAddress","address","user","Name","email","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","orderItems","map","item","image","idname","name","qty","price","totalPrice","shippingPrice","taxPrice"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAAQC,YAAR,QAA2B,wBAA3B;AACA,SAASC,WAAT,EAAqBC,WAArB,QAAwC,aAAxC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,SAAUC,UAAV,QAA4B,cAA5B;AACA,SAASC,0BAAT,EAAoCC,sBAApC,QAAiE,iCAAjE;AAEA,OAAO,mBAAP;;AAEA,SAASC,WAAT,GAAuB;AAAA;;AAEnB,QAAM;AAACC,IAAAA;AAAD,MAAKT,SAAS,EAApB,CAFmB,CAGnB;;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,KAAD,CAAxC;AACA,MAAIe,OAAO,GAAGP,UAAU,EAAxB;AAEA,QAAMQ,QAAQ,GAAGX,WAAW,EAA5B;AAEA,QAAMY,YAAY,GAAGX,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACD,YAAhB,CAAhC;AACA,QAAM;AAACE,IAAAA,aAAD;AAAeC,IAAAA,OAAf;AAAuBC,IAAAA;AAAvB,MAA8BJ,YAApC;AAEA,QAAMK,QAAQ,GAAGhB,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACI,QAAhB,CAA5B;AACA,QAAM;AAACF,IAAAA,OAAO,EAACG,UAAT;AAAoBC,IAAAA,OAAO,EAACC;AAA5B,MAAwCH,QAA9C,CAbmB,CAcnB;;AAMAvB,EAAAA,SAAS,CAAC,MAAM;AACZ2B,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBR,aAAlB;;AAEC,UAAMS,YAAY,GAAC,YACpB;AACE,YAAM;AAACC,QAAAA,IAAI,EAACC;AAAN,UAAiB,MAAM5B,KAAK,CAAC6B,GAAN,CAAU,qCAAV,CAA7B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BG,QAA1B;AAEA,YAAME,MAAM,GAAEC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;AACAF,MAAAA,MAAM,CAACG,IAAP,GAAY,iBAAZ;AACAH,MAAAA,MAAM,CAACI,GAAP,GAAY,2CAA0CN,QAAS,EAA/D;AAEAE,MAAAA,MAAM,CAACK,KAAP,GAAa,IAAb;;AAEAL,MAAAA,MAAM,CAACM,MAAP,GAAc,MAAK;AACnB;AACExB,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD,OAHD;;AAKAmB,MAAAA,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,MAA1B;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBc,MAAM,CAACC,MAA/B;AAED,KAnBA,CAHW,CAwBZ;;;AAEAd,IAAAA,YAAY;AACZZ,IAAAA,QAAQ,CAACP,0BAA0B,CAACG,EAAD,CAA3B,CAAR,CA3BY,CA6BZ;AACI;AAEJ;AACE;AAGF;AACH,GArCQ,EAqCN,CAACI,QAAD,EAAUJ,EAAV,EAAaa,UAAb,CArCM,CAAT;;AAuCA,QAAMkB,cAAc,GAAGC,aAAD,IACtB;AACElB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BiB,aAA7B;AACA5B,IAAAA,QAAQ,CAACN,sBAAsB,CAACE,EAAD,EAAIgC,aAAJ,CAAvB,CAAR;AACD,GAJD,CA3DmB,CAmEnB;AACA;AACA;AAEE;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAIF;AACA;;;AACA,sBACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA,4BACI,QAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAsB,QAAA,GAAG,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAMI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA,8BAEI;AAAI,QAAA,SAAS,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,EAOKxB,OAAO,IAAE,IAAT,IAAiByB,MAAM,CAACC,IAAP,CAAY7B,YAAY,CAACE,aAAzB,EAAwC4B,MAAxC,IAAgD,CAAjE,gBACD;AAAA,+BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADC,gBAKD;AAAA,gCAEI;AAAA,sCAAkB9B,YAAY,CAACE,aAAb,CAA2B6B,GAA7C;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAGM/B,YAAY,CAACE,aAAb,CAA2B8B,eAA3B,CAA2CC,OAHjD,oBAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,OAK2BjC,YAAY,CAACE,aAAb,CAA2BgC,IAA3B,CAAgCC,IAL3D,oBAKiE;AAAA;AAAA;AAAA;AAAA,gBALjE,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,EAQS,GART,EAQcnC,YAAY,CAACE,aAAb,CAA2BgC,IAA3B,CAAgCE,KAR9C,eASgB;AAAA;AAAA;AAAA;AAAA,gBAThB,eASsB;AAAA;AAAA;AAAA;AAAA,gBATtB,eAWK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXL,EAYMpC,YAAY,CAACE,aAAb,CAA2B8B,eAA3B,CAA2CC,OAZjD,OAaMjC,YAAY,CAACE,aAAb,CAA2B8B,eAA3B,CAA2CK,IAbjD,OAawD,GAbxD,OAcMrC,YAAY,CAACE,aAAb,CAA2B8B,eAA3B,CAA2CM,UAdjD,OAc8D,GAd9D,EAeMtC,YAAY,CAACE,aAAb,CAA2B8B,eAA3B,CAA2CO,OAfjD,eAgBC;AAAA;AAAA;AAAA;AAAA,gBAhBD,EAiBMvC,YAAY,CAACE,aAAb,CAA2BsC,WAA3B,gBAAwC;AAAA,sCAAsBxC,YAAY,CAACE,aAAb,CAA2BuC,WAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAxC,gBACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBJ,eAmBC;AAAA;AAAA;AAAA;AAAA,gBAnBD,eAuBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBD,cAwBWzC,YAAY,CAACE,aAAb,CAA2BwC,aAxBtC,eAyBC;AAAA;AAAA;AAAA;AAAA,gBAzBD,EA2BE1C,YAAY,CAACE,aAAb,CAA2ByC,MAA3B,gBAAmC;AAAA,iCAAiB3C,YAAY,CAACE,aAAb,CAA2B0C,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAnC,gBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5BJ,eA6BC;AAAA;AAAA;AAAA;AAAA,gBA7BD,eA6BM;AAAA;AAAA;AAAA;AAAA,gBA7BN,eAgCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhCD,EAiCE5C,YAAY,CAACE,aAAb,CAA2B2C,UAA3B,CAAsCf,MAAtC,KAA+C,CAA/C,gBAEC;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD,gBAOA;AAAA,oBACK9B,YAAY,CAACE,aAAb,CAA2B2C,UAA3B,CAAsCC,GAAtC,CAA2CC,IAAD,iBACzC;AAAA,oCACE;AAAK,cAAA,GAAG,EAAEA,IAAI,CAACC,KAAf;AAAsB,cAAA,SAAS,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAG,YAAWD,IAAI,CAACE,MAAO,EAAlC;AAAA,wBACKF,IAAI,CAACG;AADV;AAAA;AAAA;AAAA;AAAA,oBAFF,EAKK,GALL,EAMGH,IAAI,CAACI,GANR,SAMgBJ,IAAI,CAACK,KANrB,gBAMiCL,IAAI,CAACI,GAAL,GAAWJ,IAAI,CAACK,KANjD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD;AADL;AAAA;AAAA;AAAA;AAAA,gBAxCF,eA0DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1DF,0BA2DkBpD,YAAY,CAACE,aAAb,CAA2BmD,UAA3B,GAAsCrD,YAAY,CAACE,aAAb,CAA2BoD,aAAjE,GAA+EtD,YAAY,CAACE,aAAb,CAA2BqD,QA3D5H,eA2DqI;AAAA;AAAA;AAAA;AAAA,gBA3DrI,yBA4DiBvD,YAAY,CAACE,aAAb,CAA2BoD,aA5D5C,eA4D0D;AAAA;AAAA;AAAA;AAAA,gBA5D1D,oBA6DYtD,YAAY,CAACE,aAAb,CAA2BqD,QA7DvC,eA6DgD;AAAA;AAAA;AAAA;AAAA,gBA7DhD,0BA8DkBvD,YAAY,CAACE,aAAb,CAA2BmD,UA9D7C,eA8DwD;AAAA;AAAA;AAAA;AAAA,gBA9DxD,eA8D6D;AAAA;AAAA;AAAA;AAAA,gBA9D7D,eA0EhB,QAAC,YAAD;AAAc,UAAA,MAAM,EAAErD,YAAY,CAACE,aAAb,CAA2BmD,UAAjD;AAA6D,UAAA,SAAS,EAAE3B;AAAxE;AAAA;AAAA;AAAA;AAAA,gBA1EgB;AAAA;AAAA;AAAA;AAAA;AAAA,cAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,YANJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiKH;;GApQQhC,W;UAEMR,S,EAGGK,U,EAEGH,W,EAEIC,W,EAGJA,W;;;KAZZK,W;AAsQT,eAAeA,WAAf","sourcesContent":["import React,{useEffect,useState} from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport {PayPalButton} from 'react-paypal-button-v2'\nimport { useDispatch,useSelector } from 'react-redux';\nimport CheckoutProduct from './CheckoutProduct';\n\nimport {  useHistory } from 'react-router'; \nimport { getorderListAction_details,payorderAction_details} from './Reducers/actions/orderActions';\n \nimport './OrderScreen.css' ;\n\nfunction OrderScreen() {\n\n    const {id}=useParams()\n    // console.log(\"ORDER Id-\",id);\n    const [sdkReady, setSdkReady] = useState(false)\n    let history = useHistory()\n\n    const dispatch = useDispatch()\n\n    const getorderList = useSelector(state => state.getorderList)\n    const {getOrderItems,loading,error}=getorderList\n\n    const orderPay = useSelector(state => state.orderPay)\n    const {loading:loadingPay,success:successPay}=orderPay\n    //renaming as one loading already there frm getorderList\n\n\n    \n  \n\n    useEffect(() => {\n        console.log(\"O.S\",getOrderItems);\n\n         const paypalScript=async()=>\n        {\n          const {data:clientId}= await axios.get('http://localhost:4000/config/paypal')\n          console.log(\"1.CLIENT ID\",clientId);\n\n          const script= document.createElement(\"script\")\n          script.type='text/javascript'\n          script.src=`https://www.paypal.com/sdk/js?client-id=${clientId}`\n\n          script.async=true\n\n          script.onload=()=> //it means script has been loaded  \n          {\n            setSdkReady(true)\n          }\n\n          document.body.appendChild(script)\n          console.log(\"WINDOW PP\",window.paypal);\n\n        }\n\n        //Q.disatch up or down?\n\n        paypalScript()\n        dispatch(getorderListAction_details(id))\n\n        // if(successPay || Object.keys(getorderList.getOrderItems).length==0)\n            //  dispatch(getorderListAction_details(id))\n        \n        // else if(!getorderList.getOrderItems.isPaid)  \n          //  paypalScript()\n        \n   \n        // dispatch(getorderListAction_details(id))\n    }, [dispatch,id,successPay])\n    \n    const successHandler =(paymentResult)=>\n    {\n      console.log(\"PAYMENT RESULT\",paymentResult);\n      dispatch(payorderAction_details(id,paymentResult))\n    }\n\n\n\n    // console.log(\"O.S2\",getOrderItems,loading);\n    // const submit_form=()=>\n    // {\n        \n      // const paypalScript2=async()=>\n      // {\n      //   const {data:clientId}= await axios.get('http://localhost:4000/config/paypal')\n      //   // const {data}= await axios.get('http://localhost:4000/config/paypal')\n        \n      //   const script= document.createElement(\"script\")\n      //   script.type='text/javascript'\n      //   script.src=`https://www.paypal.com/sdk/js?client-id=${clientId}`\n\n      //   script.async=true\n\n      //   script.onload=()=> //it means script has been loaded  \n      //   {\n      //     setSdkReady(true)\n      //   }\n\n      //   document.body.appendChild(script)\n\n      //   console.log(\"CLIENT ID\",clientId);\n      //   // console.log(\"CLIENT DI2\",data);\n      // }\n\n      // paypalScript2()\n \n       \n        \n    // }\n    // dispatch(getorderListAction_details(id))\n    return (\n        <div className=\"register\">\n            <Link to=\"/\">\n                <img className=\"logo\" src=\"https://www.logodesign.net/logo/peace-bird-in-water-drop-3572ld.png\"/>\n\n            </Link>\n\n            <div className=\"registration_detail\">\n                {/* <form> */}\n                <h1 className=\"heading\">Order screen</h1>\n                {/* {console.log(\"LOAD\",loading)}\n                {console.log(\"GETORDERLIST \",typeof(getorderList.getOrderItems),Object.keys(getorderList.getOrderItems).length,(getorderList.getOrderItems))} */}\n                {/* {loading==true?<div><h2>Loading</h2></div>:<div>Not loading</div>} */}\n               \n                {loading==true && Object.keys(getorderList.getOrderItems).length==0?\n                <div>\n                    <h2>Loading</h2>\n                </div>\n                :\n                <div>\n\n                    <h2>ORDER NUMBER {getorderList.getOrderItems._id}</h2>\n                     {getorderList.getOrderItems.shippingAddress.address},\n                    \n                    <strong>Name</strong> {getorderList.getOrderItems.user.Name} <br />\n                    <strong>Email</strong>\n                    {/* <a href={`mailto:${getorderList.getOrderItems.user.email}`}> */}\n                        {' '}{getorderList.getOrderItems.user.email}\n                    {/* </a> */}<br /><br />\n\n                     <h2>Shipping address</h2>\n                     {getorderList.getOrderItems.shippingAddress.address},\n                     {getorderList.getOrderItems.shippingAddress.city} {' '},\n                     {getorderList.getOrderItems.shippingAddress.postalCode},{' '} \n                     {getorderList.getOrderItems.shippingAddress.country} \n                 <br/>\n                     {getorderList.getOrderItems.isDelivered ?<strong>Delivered on {getorderList.getOrderItems.deliveredAt}</strong>:\n                    <div> Not Deivered</div>}\n                 <br/>\n\n                \n                 \n                 <h2>Payment Method</h2>\n                  Method:-{getorderList.getOrderItems.paymentMethod} \n                 <br/>\n\n                 {getorderList.getOrderItems.isPaid ?<strong>Paid on {getorderList.getOrderItems.paidAt}</strong>:\n                    <div> Not paid</div>}\n                 <br/><br/>  \n\n\n                 <h2>Order Items</h2>\n                 {getorderList.getOrderItems.orderItems.length===0?\n\n                   <div>\n                     <h2>Your order cart is empty</h2>\n                     <Link to=\"/\">Go back</Link>\n                   </div>\n                     :\n                  <div>\n                      {getorderList.getOrderItems.orderItems.map((item) => (\n                        <div>\n                          <img src={item.image} className=\"placeOrder_img_class\"/>  \n                          <Link to={`/product/${item.idname}`}>\n                              {item.name}\n                          </Link>  \n                            {' '}\n                          {item.qty} x {item.price} = ₹ {item.qty * item.price}\n\n                        \n\n                        </div>\n                       ))}\n                  </div>\n                 } \n                \n                \n                  <h2>Order Summary</h2>\n                  Item Cost :- ₹ {getorderList.getOrderItems.totalPrice-getorderList.getOrderItems.shippingPrice-getorderList.getOrderItems.taxPrice}<br/>\n                  Shipping :- ₹ {getorderList.getOrderItems.shippingPrice}<br/>\n                  Tax :- ₹ {getorderList.getOrderItems.taxPrice}<br/>\n                  Total Cost:- ₹ {getorderList.getOrderItems.totalPrice}<br/><br/>\n\n                  {/* {!getorderList.getOrderItems.isPaid && \n                      <div>\n                            {loadingPay && <h2>LoadingPay</h2>}\n                            {!sdkReady ?\n                                        (<h2>Loading  Sdk </h2>):\n                                        (<PayPalButton amount={getorderList.getOrderItems.totalPrice} onSuccess={successHandler} currency=\"INR\"/>)\n                            }\n                       </div>\n                  } */}\n\n<PayPalButton amount={getorderList.getOrderItems.totalPrice} onSuccess={successHandler} />\n                    Not loading \n                </div>}\n\n\n\n               {/* { {loading} && <h2>Loading</h2>}? <h2>Loading</h2> : <h2>Loading</h2>} */}\n                {/* {error} */}\n                {/* {loading ===true : <div><h2>Loading</h2></div>\n                    ?\n                    <div>\n                        <h2>NO</h2>\n                    </div>\n                } */}\n\n                  {/* <h2>Shipping address</h2>\n                     {getorderList.getOrderItems.shippingAddress.address},\n                     {getorderList.getOrderItems.shippingAddress.city} {' '},\n                     {getorderList.getOrderItems.shippingAddress.postalCode},{' '} \n                     {getorderList.getOrderItems.shippingAddress.country} \n                 <br/><br/>\n                \n                 <h2>Payment Method</h2>\n                  Method:-{getorderList.getOrderItems.paymentMethod} }\n                 <br/><br/>  \n\n                 <h2>Order Items</h2>\n                 {getorderList.getOrderItems.orderItems.length===0?\n\n                   <div>\n                     <h2>Your order cart is empty</h2>\n                     <Link to=\"/\">Go back</Link>\n                   </div>\n                     :\n                  <div>\n                      {getorderList.getOrderItems.orderItems.map((item) => (\n                        <div>\n                          <img src={item.image} className=\"placeOrder_img_class\"/>  \n                          <Link to={`/product/${item.idname}`}>\n                              {item.name}\n                          </Link>  \n                            {' '}\n                          {item.qty} x {item.price} = ₹ {item.qty * item.price}\n\n                       \n\n                        </div>\n                       ))}\n                  </div>\n                 } \n                \n                \n                  <h2>Order Summary</h2>\n                  Item Cost :- ₹ {getorderList.getOrderItems.totalPrice-getorderList.getOrderItems.shippingPrice-getorderList.getOrderItems.taxPrice}<br/>\n                  Shipping :- ₹ {getorderList.getOrderItems.shippingPrice}<br/>\n                  Tax :- ₹ {getorderList.getOrderItems.taxPrice}<br/>\n                  Total Cost:- ₹ {getorderList.getOrderItems.totalPrice}<br/><br/>  */}\n\n\n               \n\n                {/* <button className=\"create_acc\" onClick={submit_form} >Order</button> */}\n               \n                {/* </form> */}\n            </div>\n\n        </div>\n    )\n}\n\nexport default OrderScreen\n"]},"metadata":{},"sourceType":"module"}